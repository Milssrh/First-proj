import random

inventory = []
components = ["магический кристалл", "квантовый процессор", "источник энергии"]
print('='*50)
print('КОРОНА ВРЕМЕНИ: СПАСЕНИЕ ЕКАТЕРИНЫ')
print('='*50)
print('Напиши "вперед" чтобы начать игру')
start = input().lower()
if start != 'вперед':
    print('Игра завершена')
    quit()
print('Сцена: Современный музей истории.')
print('''Экскурсовод: 
    Перед вами пустая витрина. Здесь должна была находиться корона 
Екатерины Второй, но она была украдена при загадочных обстоятельствах
еще в 18 веке. На данный момент корона найдена, но находится в зале 
российских древностей. 
    Мало кто знает, но коронация Екатерины Второй в 1762 году обернулась
скандалом. В самый торжественный момент церемонии корона исчезла...''')
print('''Кто-то из одноклассников спросил, что за документ помещен
в витрину. Экскурсовод прочитал то, что было написано:
"Исчезновение короны стало началом конца. Без главного символа 
власти легитимность Екатерины ставилась под сомнение.
В народе пошли слухи:'Проклятая императрица! Боги не принимают её коронацию!
Где корона - там и благословение небес. Нет короны - нет и права на престол!"''')
print('Напиши "далее" чтобы продолжить.')
input()
print('После экскурсии тебе пишет друг:')
print('Алексей: Мы можем спасти Екатерину Вторую!')
print('У моего дедушки есть чертежи машины времени.')
print('Давай вернем корону и изменим историю!')
print('Вы с Алексем проникаете в музей ночью.')
print('Перед дверью в зал с короной вы видите старинную табличку с загадкой:')

print('='*50)
print("УРОВЕНЬ 1")
print("ЗАГАДКА ДЛЯ ДОСТОЙНЫХ:")
print('''Я — город, но не Москва,
Построен Петром на болотах,
Мой основатель прорубил окно в Европу,
Назови мое имя, и путь будет открыт!''')
print('='*50)

answer = input('Твой ответ: ').lower()
if 'петербург' in answer or 'санкт-петербург' in answer:
    print('Правильно! Дверь медленно открывается...')
    print('Перед вами великолепная корона Екатерины II!')
    inventory.append('корона Екатерины II')
    print('Корона у вас!')
else:
    print('Неверно! Дверь не открывается.')
    print('Подсказка: этот город был столицей России при Екатерине II')
    print('Попробуй еще раз!')
    answer = input('Твой ответ: ').lower()
    if 'петербург' in answer or 'санкт-петербург' in answer:
        print('Теперь правильно! Дверь открывается!')
        print('Вы забираете корону Екатерины II!')
        inventory.append('корона Екатерины II')
    else:
        print('К сожалению, вы не смогли пройти. Игра окончена.')
        quit()
print('='*50)
print('ПОИСК КОМПОНЕНТОВ')
print('='*50)
print('Алексей: Теперь найдем детали для машины времени.')
print('Ищем в трех отделах музея.')
component_locations = {
    'магический кристалл': 'химия',
    'квантовый процессор': 'технологии', 
    'источник энергии': 'физика'}
found_components = []
for component, correct_location in component_locations.items():
    print(f'- Ищем: {component} -')
    attempts = 3
    while attempts > 0:
        print(f'Осталось попыток: {attempts}')
        guess = input('В каком отделе ищем? (физика/химия/технологии): ').lower()
        if guess == correct_location:
            print(f'Ура! Нашел {component} в отделе {correct_location}!')
            found_components.append(component)
            break
        else:
            print('Не тут! Попробуй еще раз.')
            attempts -= 1
    if attempts == 0:
        print(f'К сожалению, вы не нашли {component}. Игра окончена.')
        quit()
print('='*50)
if len(found_components) == 3:
    print('Ура! Все детали найдены!')
    inventory.extend(found_components)
    print('Алексей: Отлично! Мы собрали:')
    for item in inventory:
        print(f'- {item}')
    print('Машина времени готова к запуску!')
    print('Пристегнись - летим в 1762 год!')
else:
    print('Что-то пошло не так...')
    quit()
print('='*50)
print('МОЛОДЕЦ! ИСПЫТАНИЕ ПРОЙДЕНО!')
print('='*50)
print('Твой инвентарь:')
for i, item in enumerate(inventory, 1):
    print(f'{i}. {item}')
print('Напиши "путешествие" чтобы лететь в прошлое...')
next_level = input().lower()
if next_level == 'путешествие':
    print('Машина времени запускается...')
    print('Вспышка света... Вы летите в 1762 год!')
else:
    print('Игра завершена.')

print("Уровень 2")
print("Текущий год: 150 миллионов лет до нашей эры")
print("Место нахождения: Юрский период")
print('''
           __
          / _)
   .-^^^-/ /
__/       /
<__.|_|-|_|
    ''')

found_details = []
translator = False
wire = False
crystal = False
gear = False
battery = False

print("Машина времени сломана! Нужно найти детали для починки:")
print("1. Шестеренка\n2. Провод\n3. Кристалл\n4. Батарея\n5. Карта местности")
print("\n Сначала найдите переводчик у динозавра у реки!")

while len(found_details) < 4:
    print(f"\n Ваш инвентарь: {inventory}")
    command = input("Куда пойдем? (лес/пещера/река/водопад): ").lower()

    if command == "лес":
        if not wire:
            if translator:
                print("Вы встретили дружелюбного динозавра!")
                print("(Благодаря переводчику вы понимаете его речь)")
                answer = input("Что имеет начало, но не имеет конца? ")
                if answer.lower() == "луч":
                    print("Динозавр дал вам провод!")
                    inventory.append("провод")
                    found_details.append("провод")
                    wire = True
                else:
                    print("Динозавр пока не хочет вам помогать...")
            else:
                print("Вы встретили динозавра, но не понимаете его речь!")
        else:
            print("Вы уже получили провод у этого динозавра.")

    elif command == "пещера":
        if not crystal:
            if translator:
                print("В пещере вы встретили динозавра с палкой в зубе!")
                print("Он просит помочь ему вытащить палку")
                    
                if random.choice([True, False]):
                    print("Вы успешно вытащили палку!")
                    print("В благодарность он показал вам кристалл!")
                    inventory.append("кристалл")
                    found_details.append("кристалл")
                    crystal = True
                else:
                    print("Вам не удалось вытащить палку...")
            else:
                print("В пещере динозавр, но вы не понимаете его!")
        else:
            print("Вы уже нашли кристалл в пещере.")

    elif command == "река":
        if not gear:
            print("Вы нашли шестеренку на берегу реки!")
            inventory.append("шестеренка")
            found_details.append("шестеренка")
            gear = True

        if not translator:
            print("У реки вы встретили мудрого динозавра!")
            print("'Реши мою загадку, и я дам тебе переводчик!'")
            answer = input("Оно может повторить любое движение, но никогда не придумает ничего нового: ")
                
            if answer.lower() == "зеркало":
                print("Правильно! Вы получаете переводчик!")
                inventory.append("переводчик")
                translator = True
            else:
                print("Неправильно! Попробуйте еще раз!")
        else:
            print("Вы уже получили переводчик у этого динозавра.")

    elif command == "водопад":
        if not battery:
            print("Вы нашли водопад! За ним скрывается пещера.")
            answer = input("О чем говорят: «Поставь», а хотят, чтоб он нагрелся?")
            if answer.lower() == "чайник" or answer.lower() == "самовар":
                print("Правильно! В пещере вы нашли батарею!")
                inventory.append("батарея")
                found_details.append("батарея")
                battery = True
            else:
                print("Ничего не найдено... Попробуйте другую загадку!")
        else:
            print("Вы уже нашли батарею здесь.")

    else:
        print("Неизвестное направление!")

print("\nПоздравляем! Вы нашли все детали!")
print("Машина времени починена! Отправляемся в Российскую империю...")


print("Уровень 3")
print("Текущий год: 1762")
print("Место нахождения: Санкт-Петербург")

invitation = False
coins = False
clothes = False
ring = False
permission = False

print("Нужно попасть на прием к Екатерине II!")
print("Для этого нужно:")
print("- Решить загадку придворного для приглашения")
print("- Решить загадку торговца для получения монет") 
print("- Купить одежду на монеты")
print("- Найти кольцо для дамы")
print("- Получить разрешение от часового")

while not (invitation and coins and clothes and ring and permission):
    print(f"\nВаш инвентарь: {inventory}")
    print("\nЧто будем делать?")
    print("1 - Поговорить с придворным")
    print("2 - Поговорить с торговцем")
    print("3 - Купить одежду")
    print("4 - Помочь придворной даме")
    print("5 - Поговорить с часовым")

    choice = input("Выберите действие: ")
        
    if choice == "1":
        if not invitation:
            print("\nПридворный: 'Решите загадку для приглашения!'")
            answer = input("Что принадлежит вам, но другие используют это чаще, чем вы? ")
                
            if answer.lower() == "имя":
                print("Правильно! Вы получаете приглашение!")
                inventory.append("приглашение")
                invitation = True
        else:
            print("Неправильно! Попробуйте еще раз!")
    else:
        print("У вас уже есть приглашение!")
                
    if choice == "2":
        if not coins:
            print("\nТорговец: 'Решите загадку для монет!'")
            answer = input("Если в арке крикнуть громко, отзовется оно звонко: ")
                
            if answer.lower() == "эхо":
                print("Правильно! Вы получаете монеты!")
                inventory.append("монеты")
                coins = True
            else:
                print("Неправильно! Попробуйте еще раз!")
        else:
            print("У вас уже есть монеты!")
                
    elif choice == "3":
        if not clothes:
            if "монеты" in inventory:
                print("Вы купили красивую дворцовую одежду!")
                inventory.append("одежда")
                clothes = True
                inventory.remove("монеты")
            else:
                print("У вас нет монет!")
        else:
            print("У вас уже есть одежда!")
                
    elif choice == "4":
        if not ring:
            print("\nПридворная дама: 'Я потеряла кольцо! Помогите найти!'")
            print("Оно упало где-то в саду...")
            answer = input("Где искать? (у фонтана/под деревом/у статуи): ")
            if answer.lower() == "у фонтана":
                print("Вы нашли кольцо! Дама очень благодарна!")
                inventory.append("кольцо")
                ring = True
            else:
                print("Здесь нет кольца... Попробуйте поискать в другом месте!")
        else:
            print("Вы уже нашли кольцо для дамы!")
                
    elif choice == "5":
        if not permission:
            print("\nЧасовой: 'Чтобы пройти, ответьте на загадку!'")
            answer = input("Что идет вверх и вниз, но не движется? ")
            if answer.lower() == "лестница":
                print("Правильно! Вы получаете разрешение!")
                inventory.append("разрешение")
                permission = True
            else:
                print("Неправильно! Попробуйте еще раз!")
        else:
            print("У вас уже есть разрешение!")
      
    else:
        print("Неизвестное действие!")
    
print("\nПоздравляем! Вы выполнили все условия!")
print("Теперь вы готовы к встрече с Екатериной II!")

print("УРОВЕНЬ 4: ВОЗВРАЩЕНИЕ КОРОНЫ И ПОЛЕТ В НАСТОЯЩЕЕ.")
print("Вы находитесь в роскошном дворце Екатерины II.")
print("Ваша цель — вернуть корону и вернуться в настоящее время.")

inventory = ["корона"]

print("\n Перед вами запертая дверь. Чтобы открыть ее, вам необходимо ответить на загадку.")
print("Загадка: 'Я всегда впереди, но никогда не могу быть пойман. Что я?'")

answer = input("Ваш ответ: ").lower()

if answer == "будущее":
        print("Вы правильно ответили на загадку! Можете проходить.")
else:
        print("Неправильный ответ. Вход запрещен.")
  

print("\n Вы вошли в комнату и видите трон Екатерины II.")
    
print("\n Внезапно появляется Екатерина II, окруженная свитой.")
print("Она выглядит впечатленной и немного удивленной вашим появлением.")

choice = input("Вы хотите: \n1. Попросить о помощи в возвращении домой\n2. Поговорить о ее правлении\n Выбор: ")

if choice == "1":
        print("\n Вы объясняете Екатерине II свою ситуацию и просите о помощи.")
        print("Она внимательно слушает и решает помочь вам.")
        print("Екатерина II говорит: 'Я дам тебе магический амулет, который поможет тебе вернуться в твое время.'")
        print("Вы получаете амулет и благодарите ее за помощь.")
        
        print("\n После разговора Екатерина II решает отправить вас обратно в настоящее время как благодарность за возвращение короны.")
        print("Вы прощаетесь с ней и выходите из дворца, полные новых знаний и впечатлений.")
        
elif choice == "2":
        print("Екатерина приглашает вас присесть и попить чай.")
        print("\n Вы начинаете разговор о правлении Екатерины II.")
        print("Она делится с вами своими мыслями о реформе и культуре.")

        stories = [
            "Екатерина II: 'Я всегда считала, что образование — это ключ к прогрессу. Я основала множество учебных заведений и поддерживала просветителей.'",
            "Екатерина II: 'Когда я пришла к власти, Россия была далеким и отсталым государством. Я стремилась сделать ее великой державой.'",
            "Екатерина II: 'Я провела ряд реформ, которые улучшили управление страной. Например, я разделила Россию на губернии для более эффективного управления.'",
            "Екатерина II: 'Я также активно поддерживала искусство и культуру. Петербург стал центром европейской культуры благодаря моим усилиям.'",
            "Екатерина II: 'Моя политика была направлена на укрепление власти монарха, но я также пыталась заботиться о народе.'"
        ]

        for story in stories:
            print(story)
            input("Нажмите Enter, чтобы продолжить...")

        print("\n Екатерина II говорит: 'Я вижу, что тебе очень понравились наши загадки. Вот еще одна для тебя:'")
        print("Загадка: 'У меня есть города, но нет домов. У меня есть горы, но нет деревьев. У меня есть воды, но нет рыб. Что я?'")

        answer = input("Ваш ответ: ").lower()

        if answer == "карта":
            print("Правильно! Ты действительно умный человек.")
            print("Екатерина II улыбается и говорит: 'Ты заслужил еще одну подсказку о моей жизни.'")
            print("'Я мечтала о том, чтобы Россия стала частью Европы, и работала над этим всю свою жизнь.'")
        else:
            print("Неправильный ответ. Екатерина II выглядит разочарованной.")
            print("'Не все загадки легко разгадать, но ты можешь попробовать еще раз позже.'")

        print("\n Внезапно вы слышите шум за дверью. Это охрана!")
        print("Чтобы пройти мимо них, вам нужно решить еще одну загадку.")
        print("Загадка: 'Что растет вверх, но никогда не растет вниз?'")

        answer = input("Ваш ответ: ").lower()
        if answer == "возраст":
            print("Вы правильно ответили на загадку! Охрана пропускает вас.")
            print("Вы можете продолжить свой путь к трону Екатерины II.")
        else:
            print("Неправильный ответ. Охрана задерживает вас!")
     

        print("\n Вы проходите мимо охраны и встречаете Григория Потемкина.")
        print("Он интересуется вашей целью в дворце.")

        potyomkin_choice = input("Вы хотите: \n1. Рассказать о своей миссии\n2. Спросить его о его дальнейших планах\n Выбор: ")

        if potyomkin_choice == "1":
            print("\n Вы рассказываете Потемкину о своей миссии по возвращению короны.")
            print("Он смеется и говорит: 'Корона — это лишь символ власти. Истинная сила в знаниях!'")
            print("'Позволь мне дать тебе совет — будь осторожен с теми, кто окружает Екатерину.'")
        
        elif potyomkin_choice == "2":
            print("\n Вы спрашиваете Потемкина о его планах.")
            print("Он отвечает: 'Я собираюсь расширить границы России на юг. Это требует много ресурсов и усилий.'")
            print("'Но сейчас у меня есть время для интересных разговоров. Что ты хочешь знать?'")
        
        print("\n Потемкин предлагает вам еще одну загадку:")
        print("Загадка: 'Я всегда бегу, но никогда не устаю. Я могу быть длинным или коротким,но меня нельзя остановить. Что я?'")

        answer = input("Ваш ответ: ").lower()

        if answer == "время":
            print("Правильно! Потемкин одобрительно кивает.")
            print("'Ты действительно умный человек. Я уверен, что ты справишься со всеми трудностями.'")
        else:
            print("Неправильный ответ. Потемкин выглядит немного разочарованным.")
            print("'Не все загадки легко разгадать, но ты можешь попробовать еще раз позже.'")

        print("\n Вы продолжаете путь и обнаруживаете тайную комнату с загадочной атмосферой.")
        print("На стенах висят картины, а в центре стоит старинный сундук.")
        print("Вас заинтересовал сундук и вы решили открывть его.")
        print("Но чтобы открыть сундук, вам нужно разгадать последнюю загадку.")

        print("Загадка:'У меня есть ключ, но нет замков. у меня есть пространство, но нет комнаты. У меня есть данные, но нет бумаги. Что я?'")

        answer = input("Ваш ответ: ").lower()

        if answer == "компьютер":
            print("Сундук открывается с громким скрипом!")
            print("Внутри вы находите древний манускрипт с секретами Екатерины II.")
            print("Теперь у вас есть знания, которые помогут вам вернуться домой!")
        else:
            print("Неправильный ответ. Сундук остается закрытым.")

        print("\n Екатерина II выглядит довольна вашим успехам.")
        print("Она говорит: 'Каждый момент важен в истории. Не упускайте возможность узнать больше.'")
else:
        print("\n Вы вернулись в свое время с новыми багажом знаний и воспоминаниями о приключениях!")
        print("Поздравляем с успешным прохождением!Прилетайте еще во дворец.")
        print('''Вернувшись в настоящее, ты оказался в музее истории. 
            В некогда пустой витрине была размещена корона Екатерины Второй. 
            Вернув ей корону, ты изменил ход истории, и теперь Екатерина Великая 
            запомнилась всем не как проклятая императрица, а как Велиая императрица,
            которая придерживалась передовых взглядов. Период ее праввления получил название
            "Золотой век российского дворянства".''')
